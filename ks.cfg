#Generated by Kickstart Configurator
#platform=AMD64 or Intel EM64T

#System language
lang en_US
#Language modules to install
langsupport en_US
#System keyboard
keyboard us
#System mouse
mouse
#System timezone
timezone Asia/Singapore
#Root password
rootpw --iscrypted $6$AqIIRbhH$.MFSaNXH3CIhzv5vQthYf51kvJeZah4dgBHm74adgROT/kwM7jhpAq3gFdagQNnnSO0Gu.Y4gBrY71Z4uG9mI1
#Initial user
user rapiadmin --fullname "Rapiscan system admin" --iscrypted --password $6$AqIIRbhH$.MFSaNXH3CIhzv5vQthYf51kvJeZah4dgBHm74adgROT/kwM7jhpAq3gFdagQNnnSO0Gu.Y4gBrY71Z4uG9mI1
#Reboot after installation
reboot
#Use text mode install
text
#Install OS instead of upgrade
install
#Use CDROM installation media
cdrom
#System bootloader configuration
bootloader --location=mbr 
#Clear the Master Boot Record
zerombr yes
#Partition clearing information
clearpart --all --initlabel 
#Disk partitioning information
part swap --size 1024
part / --fstype xfs --size 1 --grow --asprimary 
part /boot --fstype ext4 --size 256 --asprimary 
#Network config
network --bootproto=dhcp --device=enp12s0
#System authorization infomation
auth  --useshadow  --enablemd5 
#Firewall configuration
#firewall --disabled
firewall --enabled --ssh 
#Do not configure the X Window System
skipx
#Package install information
%packages
vim
openssh-server
dnsutils 
iproute2 
usbutils 
iputils-ping
curl
net-tools  # this includes commands like ifconfig and netstat
wget
man
tcpdump
make
build-essential
ubuntu-gnome-desktop


%pre
# Reading and setting variables of the installation parameters
# TTY switch
exec < /dev/tty6 > /dev/tty6

# Switch to TTY6
chvt 6
# Clear the console
clear

# Set Keyboard #
loadkeys us

# Requesting hostname #
echo "Please enter Unique Hostname ! "
read hostn
hostname $hostn
#echo "Please enter IP ADDR(feature in dev) ! "
#read ipaddr
#hostname $ipaddr
#echo -e "NETWORKING=yes\nHOSTNAME=$hostn" > /etc/sysconfig/network

# Display the summary #
echo " "
echo " "
echo "-------------------------------------------------"
echo " Installation Summary"
echo "-------------------------------------------------"
echo " "
echo " "
echo "-------------------------------------------------"
echo " Hostname = $hostn"
echo " User name = User Name"
echo " Login = rapiadmin"
echo " Password = R@piscan123"
echo " Login Root = root"
echo " Root Password = R@piscan123"
echo " Distribution = Ubuntu 18.04 LTS"
echo "-------------------------------------------------"
echo " "
echo " "
echo "-------------------------------------------------"
echo " Installation will destroy"
echo " all the contents on the disk !"
echo " "
echo " To cancel the installation,"
echo " reboot the machine within 10 seconds!"
echo "--------------------------------------------------"
echo " "
echo " "
sleep 10

# Switch back to TTY1 console
chvt 1
%end

# %post --nochroot
# UNCOMMENT HERE IF YOU NEED TO USE IT
# %end

%post
# add username to sudoer list
echo "rapiadmin ALL=(ALL)    ALL" >> /etc/sudoers

# TODO: Install all the software here

apt update
%end
## END ##